<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Arm-2D: Getting Started as an Application Designer &lt;!-- omit from toc --&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="arm.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Arm-2D
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown(this);
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">2D Image Processing Library for Cortex-M Processors</div>
  </td>
  <!--END !PROJECT_NAME-->
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_getting_started_as_an_application_designer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started as an Application Designer  </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md24"></a>
1 Before We Start</h1>
<p ><b>Arm-2D is not a GUI.</b> To be called GUI, it lacks many critical components, such as the element tree, the message processing, a rich set of controls, the support for interactive input devices, and a nice-to-have GUI designer.</p>
<p >If possible, I hope that no one would have to use Arm-2D directly to create GUI applications. However, under the cost pressure, some embedded products must develop GUI applications in resource-constrained environments (e.g. 64K Flash, 12K RAM etc.). Meanwhile, even some devices have relatively richer resources, the application software is often too big to reserve sufficient memory for using a decent GUI stack. Supporting GUI applications in resource constraint environments is a world forgotten by the mainstream embedded GUI stacks.</p>
<p >If the graphics in your application is simple, i.e. consists of panels (for displaying parameters and user settings), and the human-machine interactions are implemented based on a keyboard (or a touch panel without complex touch gestures), then using Arm-2D APIs directly to design GUI applications might be an option. In fact, if you can figure out a way to fulfill the missing parts aforementioned, the GUI application designed with Arm-2D is not only looking good but also has an impressively low memory footprint.</p>
<p >If you happen to meet the conditions above, <b>don't panic</b>, we will try our best to provide you with a easy-and-efficient development experience. <b>By focusing on the API usage and following the guidance</b> introduced in this article, <b>you can master the Arm-2D application design quickly</b>.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Table of Content &lt;!-- omit from toc --&gt;</h2>
<ul>
<li><a href="#1-before-we-start">1 Before We Start</a></li>
<li><a href="#2-step-by-step-guidance">2 Step by Step Guidance</a><ul>
<li><a href="#21-familiar-with-the-basic-concepts">2.1 Familiar with the basic concepts</a></li>
<li><a href="#22-port-arm-2d-to-your-local-platform">2.2 Port Arm-2D to your local platform</a></li>
<li><a href="#23-try-the-basic-tile-operations-and-the-layout-assistant">2.3 Try the basic Tile Operations and the Layout Assistant</a></li>
<li><a href="#24-try-existing-example-controls">2.4 Try existing example controls</a></li>
<li><a href="#25-write-a-simple-gui-application">2.5 Write a simple GUI Application</a></li>
<li><a href="#26-learn-the-basic-method-to-optimize-the-performance-and-memory-footprint">2.6 Learn the basic method to optimize the performance and memory footprint</a></li>
<li><a href="#27-tips-for-other-advanced-topics">2.7 Tips for other advanced topics</a><ul>
<li><a href="#271-benchmarks">2.7.1 Benchmarks</a></li>
<li><a href="#272-asynchronose-mode-and-rtos-support">2.7.2 Asynchronose Mode and RTOS support</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-tips-for-exploring-the-library">3 Tips For Exploring the Library</a><ul>
<li><a href="#i-am-a-library-user-i-only-care-about-how-to-use-the-library">"I am a library user, I only care about how to use the library"</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
2 Step by Step Guidance</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
2.1 The basic concepts</h2>
<p >The first step of getting started is learning some basic concepts, among which <em><b>Tile</b></em>, <em><b>Region</b></em> and <em><b>Bounding Box model</b></em> are the most fundamental ones, because almost all of the APIs take Tile(s) and Region(s) as input/output. Please kindly reading <a class="el" href="md__home_runner_work_Arm_2D_Arm_2D_README.html">**README**</a> and <a class="el" href="md_introduction.html">**Introduction**</a> for details.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
2.2 Port Arm-2D to your local platform</h2>
<p >After learning the basic concepts of Arm-2d, please follow the guidance, <a class="el" href="md_how_to_deploy_the_arm_2d_library.html">how_to_deploy_the_arm_2d_library.md</a>, to deploy Arm-2d onto your local hardware platform.</p>
<p >Of course, if you want to skip the porting step and jump to learn how to use the Arm-2D APIs, please try the template projects we prepared for you in the <code>examples</code> directory. These template projects provide porting for STM32 Discovery Board, Cortex-M FVP/VHT, MPS2/MPS3 development platforms and <b>PC (including MacOS, Windows and Linux)</b>. In addition, there are other 3rd-party porting available on Github, for example:</p>
<ul>
<li><a href="https://github.com/GorgonMeducer/Pico_Template">A porting for Raspberry Pi Pico (using MDK)</a></li>
<li><a href="https://github.com/lvgl/lv_port_an547_cm55_sim">A porting for LVGL + Arm-2D on Corstone-300-FVP</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
2.3 Try the basic Tile Operations and the Layout Assistant</h2>
<p >After having a working platform, it is good to try Arm-2D APIs with the help of <a class="el" href="use_tile.html#md_how_to_use_tile_operations">how_to_use_tile_operations.md</a>. During this process, reading <a class="el" href="md_how_to_use_layout_assistant.html">how_to_use_layout_assistant.md</a> to learn the basic layout method can make your application development much easier.</p>
<p >At this stage, one might have an outstanding question: where should I use these APIs to practice drawing operations? Please open <code>arm_2d_disp_adapter_0.c</code> and find the function <code>__pfb_draw_handler</code> as shown below - This is our playground.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span></div>
<div class="line">IMPL_PFB_ON_DRAW(__pfb_draw_handler)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_define" href="group__gKernel.html#ga206ba077ba0d890fd0be935fc5d15dda" title="a macro to mark unused variables and let the compiler happy">ARM_2D_UNUSED</a>(pTarget);</div>
<div class="line">    <a class="code hl_define" href="group__gKernel.html#ga206ba077ba0d890fd0be935fc5d15dda" title="a macro to mark unused variables and let the compiler happy">ARM_2D_UNUSED</a>(ptTile);</div>
<div class="line"> </div>
<div class="line">    arm_2d_canvas(ptTile, __top_container) {</div>
<div class="line">    </div>
<div class="line">        arm_2d_fill_colour(ptTile, NULL, GLCD_COLOR_WHITE);</div>
<div class="line">        </div>
<div class="line">        arm_2d_align_centre(__top_container, 100, 100) {</div>
<div class="line">            draw_round_corner_box(  ptTile,</div>
<div class="line">                                    &amp;__centre_region,</div>
<div class="line">                                    GLCD_COLOR_BLACK,</div>
<div class="line">                                    64,</div>
<div class="line">                                    bIsNewFrame);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        busy_wheel2_show(ptTile, bIsNewFrame);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__gKernel.html#ga129e2a7110847b0fd22eeb6351205989" title="wait asynchronous operation complete">arm_2d_op_wait_async</a>(NULL);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="group__gKernel.html#gga373f79d09c0d15653ca46ea08e0377fcacf7b5f9e66c44d332ea46d05860d78d1" title="fsm complete">arm_fsm_rt_cpl</a>;</div>
<div class="line">}</div>
</div><!-- fragment --><p >As you can see, this example code has:</p>
<ul>
<li>Filled the background with the white colour</li>
<li>Drawn a rounded corner box in black with a given opacity ratio in the centre of the screen</li>
<li>Drawn a busy-wheel with an existing control.</li>
</ul>
<p ><b>Figure 2-1 The Default Scene of an Display Adapter.</b></p>
<p ><img src="DispAdapterDefaultScene.gif" alt="" class="inline" title="DefaultScene"/></p>
<p >You can replace the code inside <code>__pfb_draw_handler</code> with your own and visually check the result in the default scene hidden by the display adapter. During this process, you can, of course, use the default picture resources coming with Arm-2d, for example, the CMSIS-Logo as shown in <b>Figure 2-2</b> via corresponding <code><a class="el" href="group__gKernel.html#structarm__2d__tile__t" title="a type for tile">arm_2d_tile_t</a></code> objects: <code>c_tileCMSISLogoGRAY8</code>, <code>c_tileCMSISLogoRGB565</code> and <code>c_tileCMSISLogoCCCA8888</code> defined in <code>cmsis_logo.c</code>. But sooner or later, you would like to use your own pictures. Arm-2D provides a Python script to help you convert images into <code><a class="el" href="group__gKernel.html#structarm__2d__tile__t" title="a type for tile">arm_2d_tile_t</a></code> objects in C. For more details, please read this guide.</p>
<p ><b>Figure 2-2 The Default Picture resource: CMSIS logo</b></p>
<p ><img src="../examples/common/asset/CMSIS_Logo_Final.png" alt="" class="inline"/></p>
<p >After finishing the steps above, <b>congratulations, welcome to join the Arm-2D community.</b></p>
<h2><a class="anchor" id="autotoc_md30"></a>
2.4 Try example controls</h2>
<p >Arm-2D provides example controls in the <code>examples/common</code> directory, which are not only read as reference codes but also available for user applications. To include those example controls, please add the component <code>Acceleration::Arm-2D Extras::Controls</code> in the RTE configuration (as shown in <b>Figure 2-3</b>). Hence all control source codes and related resources will be added to the project.</p>
<p ><b>NOTE:</b> The linker will remove those unused controls or resources.</p>
<p ><b>Figure 2-3 Selecting Controls in RTE</b></p>
<p ><img src="GettingStartedAsAppDesigner_RTE_Controls.png" alt="" class="inline" title="Controls in RTE"/></p>
<h2><a class="anchor" id="autotoc_md31"></a>
2.5 Write a simple GUI Application</h2>
<p >For a real application, you cannot write everything in the default scene coming in the display adapter. You might already notice that the display adapter provides a service called Scene Player, which maintains a FIFO of scenes, allowing us to add new scenes and switch to the next, during which the Scene Player could optionally apply some visual effects like fade-in-fade-out, erasing, sliding etc.</p>
<p ><b>In Arm-2D realm, a GUI application is designed and organized as a series of scenes.</b> When and How to switch to Which scenes are totally under your control. There are two simple ways to add a new scene in MDK:</p>
<ul>
<li><p class="startli">Using RTE configuration to add a number of new scenes</p>
<p class="startli">In RTE configuration, you can update the number of <code>Acceleration::Arm-2D Helper::Scene</code> to add new scenes, as shown below:</p>
<p class="startli"><b>Figure 2-4 Adding new scenes in RTE</b></p>
</li>
</ul>
<p ><img src="AddingScenesinRTE.png" alt="" class="inline" title="Adding Scenes in RTE"/></p>
<p >As all scenes added with this method are included by the header file <code>arm_2d_scenes.h</code> automatically, you can include them in your project like this: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;arm_2d_helper.h&quot;</span>          <span class="comment">/* arm_2d.h is also included in this header file */</span></div>
<div class="line"><span class="preprocessor">#include &quot;arm_2d_disp_adapters.h&quot;</span>   <span class="comment">/* include all display adapters */</span></div>
<div class="line"><span class="preprocessor">#include &quot;arm_2d_scenes.h&quot;</span>          <span class="comment">/* include all scenes added in RTE */</span></div>
</div><!-- fragment --><p >By calling the constructor <code>arm_2d_sceneN_init()</code>, one instance of <em><b>sceneN</b></em> is created, initialized and added to the Scene Player FIFO. For example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code hl_function" href="group__gKernel.html#gae417897e7d7186b294c0ff3468102276" title="initialise arm-2d">arm_2d_init</a>();</div>
<div class="line">    disp_adapter0_init();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* create scene0 and add to the Display Adapter FIFO */</span></div>
<div class="line">    arm_2d_scene0_init(&amp;DISP0_ADAPTER);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Switch to the next scene, i.e. scene0 in this case  */</span></div>
<div class="line">    <a class="code hl_function" href="group__gHelper.html#gae6df5a7c480a7e3f44a926772ba78cb8" title="request switching to the next scene safely">arm_2d_scene_player_switch_to_next_scene</a>(&amp;DISP0_ADAPTER);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span>(1) {</div>
<div class="line">        disp_adapter0_task();</div>
<div class="line">        ...</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p ><b>NOTE</b>: if we haven't disabled the default scene in the <code>Display Adapter 0</code>, then after adding the scene0 to the FIFO by calling the <code>arm_2d_scene0_init</code>(), it becomes the next available scene in the FIFO, and you have to call <code><a class="el" href="group__gHelper.html#gae6df5a7c480a7e3f44a926772ba78cb8" title="request switching to the next scene safely">arm_2d_scene_player_switch_to_next_scene()</a></code> to update the FIFO and show it on the screen. If we have disabled the default scene, then after calling the constructor, scene0 is the first available scene in the FIFO and is shown as the current scene on the screen. In this case, you don't have to call <code><a class="el" href="group__gHelper.html#gae6df5a7c480a7e3f44a926772ba78cb8" title="request switching to the next scene safely">arm_2d_scene_player_switch_to_next_scene()</a></code>.</p>
<ul>
<li><p class="startli">Using Code Template to add new scenes</p>
<p class="startli">Except for the method above, you can add a new scene through the code template. For any given group in the project view, please right-click and select "**Add New Item to Group**" in the pop-up menu (as shown in <b>Figure 2-5</b>), then in the dialog find "**User Code Template**", expand the Acceleration and select the <code>Arm-2D:Core::User Scene Template</code> (as shown in <b>Figure 2-6</b>).</p>
<p class="startli"><b>Figure 2-5 Adding New Items to a Group</b></p>
</li>
</ul>
<p ><img src="AddNewItemsToGroup.png" alt="" class="inline" title="AddingNewItemsToAGroup"/></p>
<p ><b>Figure 2-6 Adding a New Scene using Code Template</b></p>
<p ><img src="AddingScenesViaTemplate.png" alt="" class="inline" title="AddingScenesViaTempalte"/></p>
<p >After clicking the "Add" button, two files <code>, arm_2d_scene_template.h</code> and <code>arm_2d_scene_template.c</code>, will be added to your project folder. Open them in any editor and replace all <code>&lt;NAME&gt;</code> with your scene name (for example, <code>MY_SCENE</code> in upper case) and supersede all <code>&lt;scenen&gt;</code> with the same name in the lower case (for example, <code>my_scene</code>).</p>
<p ><b>NOTE</b>: Because scenes added with the code template are not included in the <code>arm_2d_scenes.h</code>, you must manually include the corresponding header files.</p>
<p >By default, the display adapter switches scenes without any visual effects. You can call the function <code><a class="el" href="group__gHelper.html#ga6b9ef0f3e0f80430fc036f6d3c67c135" title="configure the scene switching mode">arm_2d_scene_player_set_switching_mode()</a></code> to apply some predefined switching visual effects, for example:</p>
<div class="fragment"><div class="line"><span class="comment">/* set switching visual effects: Fade-in-Fade-out in White */</span></div>
<div class="line"><a class="code hl_define" href="group__gHelper.html#ga6b9ef0f3e0f80430fc036f6d3c67c135" title="configure the scene switching mode">arm_2d_scene_player_set_switching_mode</a>( &amp;DISP0_ADAPTER,</div>
<div class="line">                                        ARM_2D_SCENE_SWITCH_MODE_FADE_WHITE);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* the period of the switching effect */</span></div>
<div class="line"><a class="code hl_function" href="group__gHelper.html#gac437acd591ac725054b4216fa2351013" title="configure the scene switching period">arm_2d_scene_player_set_switching_period</a>(&amp;DISP0_ADAPTER, 3000);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__gHelper.html#gae6df5a7c480a7e3f44a926772ba78cb8" title="request switching to the next scene safely">arm_2d_scene_player_switch_to_next_scene</a>(&amp;DISP0_ADAPTER);</div>
</div><!-- fragment --><p >In some visual effects, you can specify the period of the switching process by calling the function <code><a class="el" href="group__gHelper.html#gac437acd591ac725054b4216fa2351013" title="configure the scene switching period">arm_2d_scene_player_set_switching_period()</a></code>. For more, please check the header file <code><a class="el" href="arm__2d__helper__scene_8h_source.html">arm_2d_helper_scene.h</a></code>.</p>
<h2><a class="anchor" id="autotoc_md32"></a>
2.6 Learn the basic method to optimize the performance and memory footprint</h2>
<p >The design consideration of optimizing performance and memory footprint deserves a dedicated document or maybe more. We can only cover some preliminary tips here:</p>
<ul>
<li><b>For the Arm Compiler 6</b><ul>
<li>Avoid using Arm Compiler 5 whenever possible.</li>
<li>If the ROM is sufficient, try to use <b>-Omax + Link Time Optimisation</b></li>
<li>If the both the performance and the code memory footprint are important, try to use <b>-Os + Link Time Optimisation</b></li>
<li>If the code memory footprint is vital, try to use <b>-Oz + Link Time Optimisation</b></li>
<li>Do <b>NOT</b> use <b>-O0</b> unless you are debugging.</li>
</ul>
</li>
<li><b>For RAM memory footprint</b><ul>
<li>Set the FPB size <b>starting from 1/10 full framebuffer</b>.</li>
<li>For the same number of pixels, <b>prioritize width over height</b> in setting the PFB. For example, 320 * 8 is better than 80 * 32.</li>
<li>Whenever possible, <b>PFB height should be larger than or equal to 8.</b></li>
</ul>
</li>
<li><b>For performance (Frame-rate)</b><ul>
<li>LCD Latency determines the upper-limit of the system frame-rate. Please reduce it towards zero with all the methods available.</li>
<li><b>Use Asynchronous mode</b> (e.g. DMA+ISR) whenever possible.</li>
<li>Using 1/10 framebuffer doesn't mean it is 10x slower than using a full framebuffer</li>
</ul>
</li>
<li><b>For API Usage</b><ul>
<li><p class="startli">Please use the feature-specific version rather than a more generic version whenever possible for a given operation. This helps to reduce the memory footprint in general.</p>
<p class="startli">For example: for copying an rgb565 tile with a source mask without mirroring, it is better to use the function <code>arm_2d_rgb565_tile_copy_with_src_mask_only()</code> rather than <code>arm_2d_rgb565_tile_copy_with_masks()</code>.</p>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md33"></a>
2.7 Tips for other advanced topics</h2>
<h3><a class="anchor" id="autotoc_md34"></a>
2.7.1 Benchmarks</h3>
<p >To evaluate the 2D performance for a given platform, Arm-2D provides two benchmarks, i.e. <b>Benchmark-Generic</b> and <b>Benchmark-Watchpanel</b>. You can deploy the target benchmark by selecting it in the RTE configuration as shown in <b>Figure 2-7</b>.</p>
<p ><b>Figure 2-7 Selecting Benchmarks in RTE</b></p>
<p ><img src="GettingStartedAsAppDesigner_RTE_Controls.png" alt="" class="inline" title="Controls in RTE"/></p>
<p >If your MCU has a small flash, the original benchmark cannot fit into the memory. Arm-2D introduces a so called Tiny mode to solve this problem. You can enable it by either setting the macro <code>__ARM_2D_CFG_BENCHMARK_TINY_MODE__</code> to <code>1</code> in <code>arm_2d_cfg.h</code> or defining the macro in your project configuration.</p>
<p ><b>NOTE:</b> You can find ALL benchmark configurations in <code>arm_2d_cfg.h</code>.</p>
<p >Running benchmark is simple:</p>
<ol type="1">
<li>Include <code>arm_2d_benchmark.h</code></li>
<li>call function <code>arm_2d_run_benchmark()</code> after initializing Arm-2D and the display adapter(s).</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;arm_2d_helper.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;arm_2d_disp_adapters.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;arm_2d_scenes.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;arm_2d_benchmark.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) </div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code hl_define" href="group__gKernel.html#gaee644f33c5b07d65d292017b21fb3f39" title="a decoration to make the immediate following code irq-safe">arm_irq_safe</a> {</div>
<div class="line">        <a class="code hl_function" href="group__gKernel.html#gae417897e7d7186b294c0ff3468102276" title="initialise arm-2d">arm_2d_init</a>();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* initialize the display adapter 0 service */</span></div>
<div class="line">    disp_adapter0_init();</div>
<div class="line">    </div>
<div class="line">    arm_2d_run_benchmark();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <span class="comment">/* the task function of the display adapter 0 service */</span></div>
<div class="line">        disp_adapter0_task();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md35"></a>
2.7.2 Asynchronous Mode and RTOS support</h3>
<p >Arm-2D introduces an Asynchronous Mode for hardware accelerators and multi-core systems. To enable this feature, please set the macro <code>__ARM_2D_HAS_ASYNC__</code> defined in <code>arm_2d_cfg.h</code> to <code>1</code>.</p>
<p ><b>NOTE</b>: If you have no hardware accelerator, 2D capable DMA (for example, DMAC-350) or dedicated Cortex-M core(s) for 2D graphics, enabling the Asynchronous Mode gains nothing.</p>
<p >When it is good to enable the Asynchronous Mode, you have to have RTOS support also. You can enable the RTOS support in RTE as shown in <b>Figure 2-8</b>. If you cannot find the desired RTOS helper in the drop list, please choose the User Custom and implement the interface functions listed in the source code <code>arm_2d_helper_rtos_user.c</code>.</p>
<p ><b>Figure 2-8 Enable RTOS Support in RTE</b></p>
<p ><img src="EnbleRTOSSupportInRTE.png" alt="" class="inline" title="EnableRTOSSupportInRTE"/></p>
<p ><b>NOTE</b>: You do <b>NOT</b> have to enable any RTOS helper in the Synchronous Mode (<code>__ARM_2D_HAS_ASYNC__</code> is <code>0</code> ) even if you are using an RTOS. Even in the Synchronous Mode, by using an RTOS, you can run arm-2d in a dedicated thread and lock the framerate to a desired value. For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef LCD_TARGET_FPS</span></div>
<div class="line"><span class="preprocessor">#   define LCD_TARGET_FPS       30</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">__NO_RETURN</div>
<div class="line"><span class="keywordtype">void</span> app_2d_main_thread (<span class="keywordtype">void</span> *argument) </div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span>(1) {<span class="comment"></span></div>
<div class="line"><span class="comment">        //! retrieve the number of system ticks</span></div>
<div class="line"><span class="comment"></span>        uint32_t wTick = osKernelGetTickCount();        </div>
<div class="line">        <span class="keywordflow">while</span>(<a class="code hl_enumvalue" href="group__gKernel.html#gga373f79d09c0d15653ca46ea08e0377fcacf7b5f9e66c44d332ea46d05860d78d1" title="fsm complete">arm_fsm_rt_cpl</a> != disp_adapter0_task());</div>
<div class="line">        <span class="comment"></span></div>
<div class="line"><span class="comment">        //! lock frame rate</span></div>
<div class="line"><span class="comment"></span>        osDelayUntil(wTick + (1000 / LCD_TARGET_FPS));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//osThreadExit();</span></div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md36"></a>
3 Tips For Exploring the Library</h1>
<h2><a class="anchor" id="autotoc_md37"></a>
"I am a library user, I only care about how to use the library"</h2>
<ul>
<li>For library users, <b>ALL</b> useful information, i.e. type definitions, macros, prototypes of functions etc., are stored in header files which have <b>NO</b> double under-scope as their prefixes. We call those header files the <b>PUBLIC HEADER FILES</b>.</li>
<li>Please <b>ONLY</b> use APIs, macros and types that are defined in the public header files.</li>
<li>Any symbol, e.g. file name, function name, macro name, type name etc., having a double under-scope as the prefix is considered as <b>PRIVATE</b> to the library. You should save your time from touching them.</li>
<li>The library is designed with the philosophy that Users are free to use anything in public header files and should not touch anything marked implicitly or explicitly as private.</li>
<li>Despite which processor you use, during the compilation, all C source files are safe to be added to the compilation (and we highly recommend you to do this for simplicity reason). For example, when you use Cortex-M4, which doesn't support Helium extension (introduced by Armv8.1-M architecture and first implemented by the Cortex-M55 processor), it is OK to include <code>arm_2d_helium.c</code> in the compilation process, as the C source files are constructed with environment detection in pre-processing phase.</li>
<li>In your application, including <code><a class="el" href="arm__2d_8h_source.html">arm_2d.h</a></code> is sufficient to get all the services and APIs ready for you.</li>
<li><p class="startli">Make sure that the library is initialised by calling <code><a class="el" href="group__gKernel.html#gae417897e7d7186b294c0ff3468102276" title="initialise arm-2d">arm_2d_init()</a></code> before using any of the services.</p>
<p class="startli"><b>NOTE</b>:</p><ol type="1">
<li>Feature configuration macros are checked by <code>arm_2d_feature.h</code>. For the current stage of the library, please <b>DO NOT</b> override those feature configuration macros. </li>
</ol>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
